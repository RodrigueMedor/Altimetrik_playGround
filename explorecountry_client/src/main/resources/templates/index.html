<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Explore School</title>
    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/json2/20130526/json2.min.js"></script>
    <style>


        html, body {
            height: 100%;
            margin: 10px;
            padding: 5px;
        }

        div#map {
            width: 600px;
        }
    </style>
</head>
<body>
	<script type="text/javascript">
	 function exploreSchools() {
	        var collegeSeach = $("#zipCode").val();
	        if (collegeSeach == "") {
	            alert("Please provide Zip code...");
	            return;
	        }

         var send = {
             zipCode :parseInt( $("#zipCode").val()),
             distance: $("#distance").val(),
             predominant: $("#predominant").val(),
             year:$("#year").val(),
             numberPage: 100,
         }

         if(zipCode == undefined){
             alert("School not found...");
         }

         $.ajax({
             url: "http://localhost:8080/api/search",
             type: "POST",
             data: JSON.stringify(send),
             dataType: "json",
             contentType: "application/json",
             success: function(json) {
                 $.each(json, function (index, value) {
                     // console.log("value", value);
                    var row = $("<tr><td>"+value["school.name"]+"</td><td>"+value[$("#year").val()+".student.size"]+"</td><td>"+value.id+"</td></tr>");
                     $("#mytable").append(row);
                 });

             },
             error: function(jqXHR, textStatus, errorThrown){
                 alert('error: ' + textStatus + ': ' + errorThrown);
             }
             });
                // return false;
         function initMap() {
             var map = new google.maps.Map(document.getElementById('map'), {
                 zoom: 4,
                 center: {lat: 41, lng: -91}
             });

             var image = 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png';
             var beachMarker = new google.maps.Marker({
                 position: {lat: 41.0184511, lng: -91.9693545},
                 map: map,
                 icon: image
             });
         }
         initMap();
	    }

	</script>
	<div>
    <h1>Explore School</h1>
    <input type="text" id="zipCode" name="zipCode" placeholder="Enter Zip code">
    </br>
        <input type="text" id="distance" name="distance" placeholder="Enter distance">
        </br>
        <input type="text" id="predominant" name="predominant" placeholder="Enter predominant">
        </br>
        <input type="text" id="year" name="year" placeholder="Enter year">
        </br>
    <button id="check" type="button" onclick="exploreSchools()">Find School</button>
</div>
</br>
<div id="map" style="width: 500px; height: 400px;"></div>

<table id="mytable">

</table>

</body>
</html>